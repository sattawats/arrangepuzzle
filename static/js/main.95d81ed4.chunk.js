(this["webpackJsonpgame-react"]=this["webpackJsonpgame-react"]||[]).push([[0],{24:function(e,t,n){e.exports=n(45)},29:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(16),o=n.n(i),s=n(5),c=n(6),l=n(10),u=n(9),h=n(11),d=(n(29),n(13)),v=n.n(d),f=n(15),m=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).containerRef=void 0,n.canvasRef=void 0,n.ratio=void 0,n.containerRef=r.a.createRef(),n.canvasRef=r.a.createRef(),n.ratio=e.renderHeight/e.renderWidth,n.state={windowWidth:window.innerWidth},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.onresize=function(){e.state.windowWidth!==window.innerWidth&&e.setState({windowWidth:window.innerWidth})},this.setState({windowWidth:window.innerWidth})}},{key:"render",value:function(){var e=this.props,t=e.canvasId,n=e.renderWidth,a=e.renderHeight;this.ratio=a/n;var i=this.getWidth(),o=this.getHeight(i),s={width:"".concat(Math.round(i),"px"),height:"".concat(Math.round(o),"px")};return r.a.createElement("div",{ref:this.containerRef,className:"text-center"},r.a.createElement("canvas",{id:t,ref:this.canvasRef,width:n,height:a,style:s}))}},{key:"getWidth",value:function(){var e,t=null!==(e=this.props.scale)&&void 0!==e?e:1,n=this.containerRef.current;if(null===n)return this.state.windowWidth*t;var a=this.props.maxWidth;return a?Math.min(n.clientWidth,a)*t:n.clientWidth}},{key:"getHeight",value:function(e){return this.ratio*e}}]),t}(r.a.Component),b=n(50),p=n(12),y=function(){function e(t,n){Object(s.a)(this,e),this.x=void 0,this.y=void 0,this.x=t,this.y=n}return Object(c.a)(e,[{key:"c",value:function(){return this.x}},{key:"r",value:function(){return this.y}}]),e}(),w=function(e){function t(e,n){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this))).r=0,a.c=0,a.n=0,a.size=void 0,a.numberTextNode=void 0,a.background=void 0,a.size=n,a.regX=n.x/2,a.regY=n.y/2,a.x=e.x+a.regX,a.y=e.y+a.regY,a.background=new p.Shape,a.drawBackground("#085B7E"),a.addChild(a.background),a.numberTextNode=new p.Text,a.numberTextNode.color="white";var r=Math.floor(n.x/2);return a.numberTextNode.font="bold ".concat(r,"px Arial"),a.numberTextNode.text="0".toString(),a.numberTextNode.textAlign="center",a.numberTextNode.textBaseline="middle",a.numberTextNode.x=a.size.x/2,a.numberTextNode.y=a.size.y/2,a.addChild(a.numberTextNode),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"setNumber",value:function(e){this.n=e,this.numberTextNode.text=e.toString()}},{key:"drawBackground",value:function(e){var n=t.MARGIN,a=t.MARGIN,r=this.size.x-2*t.MARGIN,i=this.size.y-2*t.MARGIN,o=t.RADIUS*r;this.background.graphics.beginFill("#BBB").drawRoundRect(n,a,r,i,o);var s=Math.floor(this.size.x/30);n+=s,a+=s,r-=2*s,i-=2*s,this.background.graphics.beginFill(e).drawRoundRect(n,a,r,i,o-s/2)}}]),t}(p.Container);w.MARGIN=5,w.RADIUS=.2;var g=function(e){function t(e,n){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this))).level=void 0,a.numberOfRows=0,a.numberOfColumns=0,a.tiles=[],a.attempts=0,a.callback=void 0,a.tileWidth=void 0,a.draggedTile=void 0,a.win=!1,a.level=e,a.callback=n;var r=a.level.board(),i=a.level.boardSize();a.numberOfRows=i.y,a.numberOfColumns=i.x,a.tileWidth=t.BOARD_SIZE/Math.max(a.numberOfColumns,a.numberOfRows);for(var o=0;o<a.numberOfColumns;o++)for(var c=0;c<a.numberOfRows;c++){var h=new y(o*a.tileWidth,c*a.tileWidth),d=new y(a.tileWidth,a.tileWidth),v=new w(h,d);v.r=c,v.c=o,v.x=o*a.tileWidth+v.regX,v.y=c*a.tileWidth+v.regY;var f=r[o][c];v.setNumber(f),0===f?v.alpha=0:(a.addChild(v),a.tiles.push(v))}return a.on("mousedown",(function(e){a.handleMouseDownEvent(e)})),a.on("pressmove",(function(e){a.handleMouseEvent(e)})),a.on("pressup",(function(e){a.handleMouseUpEvent(e)})),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleMouseDownEvent",value:function(e){var t=new y(e.stageX-this.x,e.stageY-this.y),n=this.findTile(t);if(void 0!==n){var a=this.level.emptyCell();void 0!==this.level.adjacentToCell(a).find((function(e){return e.x===n.c&&e.y===n.r}))&&(this.draggedTile=n)}}},{key:"handleMouseEvent",value:function(e){var t=this.draggedTile;if(void 0!==t){var n={x:e.stageX-this.x,y:e.stageY-this.y},a=this.level.emptyCell(),r=this.tileWidth,i=r/2;a.x===t.c&&(t.y=this.capBetween(n.y,t.r*r+i,a.y*r+i)),a.y===t.r&&(t.x=this.capBetween(n.x,t.c*r+i,a.x*r+i)),this.stage.update()}}},{key:"handleMouseUpEvent",value:function(e){var t=this.draggedTile;if(void 0!==t){var n=Math.floor(t.x/this.tileWidth),a=Math.floor(t.y/this.tileWidth),r=this.level.emptyCell();if(r.x===n&&r.y===a){var i=new y(t.c,t.r);this.level.swap(r,i),t.r=r.y,t.c=r.x,this.attempts+=1}t.x=t.c*this.tileWidth+t.regX,t.y=t.r*this.tileWidth+t.regY,this.draggedTile=void 0,this.stage.update(),this.level.correctAnswer()&&!this.win&&(this.win=!0),this.callback(this.win,this.attempts)}}},{key:"capBetween",value:function(e,t,n){return t>n?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))}},{key:"findTile",value:function(e){var t=Math.floor(e.x/this.tileWidth),n=Math.floor(e.y/this.tileWidth);return this.tiles.find((function(e){return e.r===n&&e.c===t}))}}]),t}(p.Container);g.BOARD_SIZE=800;var x=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"randomBool",value:function(){return Math.random()>.5}},{key:"randomInt",value:function(e,t){var n=t-e+1;return e+Math.floor(Math.random()*n)}},{key:"randomFromArray",value:function(e){return e[this.randomInt(0,e.length-1)]}}]),e}(),O=function(){function e(t){Object(s.a)(this,e),this._board=void 0,this._emptyCell=void 0,this._size=void 0,this._board=[],this._size=t,this._emptyCell=new y(t.x-1,t.y-1);for(var n=0;n<t.c();++n){this._board[n]=[];for(var a=0;a<t.r();++a)this._board[n][a]=this.correctNumber(n,a)}this.shuffle(100*t.x*t.y)}return Object(c.a)(e,[{key:"board",value:function(){return this._board}},{key:"boardSize",value:function(){return{x:this._board.length,y:this._board[0].length}}},{key:"emptyCell",value:function(){return this._emptyCell}},{key:"adjacentToCell",value:function(e){var t=[],n=e.x,a=e.y,r=this.boardSize();return n>0&&t.push(new y(n-1,a)),n<r.x-1&&t.push(new y(n+1,a)),a>0&&t.push(new y(n,a-1)),a<r.y-1&&t.push(new y(n,a+1)),t}},{key:"swap",value:function(e,t){var n=this._board[e.x][e.y];this._board[e.x][e.y]=this._board[t.x][t.y],this._board[t.x][t.y]=n,0===this._board[e.x][e.y]?this._emptyCell=e:0===this._board[t.x][t.y]&&(this._emptyCell=t)}},{key:"correctAnswer",value:function(){for(var e=0;e<this._size.c();++e)for(var t=0;t<this._size.r();++t)if(this._board[e][t]!==this.correctNumber(e,t))return!1;return!0}},{key:"shuffle",value:function(e){for(var t=0;t<e;++t){var n=this.adjacentToCell(this._emptyCell),a=x.randomFromArray(n);this.swap(a,this._emptyCell)}}},{key:"correctNumber",value:function(e,t){return this._emptyCell.c()===e&&this._emptyCell.r()===t?0:1+(e+t*this._size.c())}}]),e}(),k=n(51),j=n(52),C=n(53),E=n(54),z=n(55),M=n(56),R=n(49),W=n(57),A=n(46),S=n(47),_=n(48),N=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).show=function(){return n.toggleModal(),new Promise((function(e,t){n.setState({resolveAlert:e})}))},n.toggleModal=function(){var e=n.state.isOpen;n.notifyAnswer(!1),n.openClose(!e)},n.onContinue=function(){n.notifyAnswer(!0),n.openClose(!1)},n.onCancel=function(){n.notifyAnswer(!1),n.openClose(!1)},n.state={isOpen:!1,resolveAlert:void 0},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"openClose",value:function(e){this.setState({isOpen:e})}},{key:"render",value:function(){var e=this.props,t=e.header,n=e.body,r=e.leftButton,i=e.rightButton,o=this.state.isOpen;return a.createElement(W.a,{isOpen:o,toggle:this.toggleModal},a.createElement(A.a,{toggle:this.toggleModal},t),a.createElement(S.a,null,n),a.createElement(_.a,null,a.createElement(R.a,{color:"primary",onClick:this.onContinue},r)," ",void 0!==i?a.createElement(R.a,{color:"secondary",onClick:this.onCancel},i):void 0))}},{key:"notifyAnswer",value:function(e){var t=this.state,n=t.isOpen,a=t.resolveAlert;n&&void 0!==a&&a(e)}}]),t}(a.Component),B=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).alertIntro=void 0,n.sizeDropdownChanged=function(e){var t=e.target.value;n.setState({boardSize:t}),n.props.onSizeChanged(t)},n.onOptions=Object(f.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.show();case 2:case"end":return e.stop()}}),e)}))),n.state={boardSize:4},n.alertIntro=r.a.createRef(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"show",value:function(){var e=Object(f.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.alertIntro.current)){e.next=4;break}return e.next=4,t.show();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderAlertBody",value:function(){var e=this.state.boardSize;return r.a.createElement(b.a,{fluid:!0,className:"text-center text-small"},r.a.createElement(k.a,null,r.a.createElement(j.a,null,r.a.createElement("b",null,"Arrange Puzzle"))),r.a.createElement(C.a,{className:"mt-3"},r.a.createElement(E.a,{row:!0},r.a.createElement(z.a,{for:"boardSizeSelect"},"Select board size:"),r.a.createElement(M.a,{type:"select",name:"select",id:"boardSizeSelect",onChange:this.sizeDropdownChanged,defaultValue:e},r.a.createElement("option",{value:3},"3x3"),r.a.createElement("option",{value:4},"4x4"),r.a.createElement("option",{value:5},"5x5"),r.a.createElement("option",{value:6},"6x6")))))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(R.a,{className:"",size:"sm",color:"primary",onClick:this.onOptions},"Options"),r.a.createElement(N,{ref:this.alertIntro,header:"Options",body:this.renderAlertBody(),leftButton:"Close"}))}}]),t}(r.a.Component),T=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).alertIntro=void 0,n.state={moves:0},n.alertIntro=r.a.createRef(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"show",value:function(){var e=Object(f.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.alertIntro.current)){e.next=5;break}return this.setState({moves:t}),e.next=5,n.show();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderAlertBody",value:function(){var e=this.state.moves;return r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{className:"pb-5 pt-5"},r.a.createElement("h4",null,"Yeah! You beat the arrage puzzle"),r.a.createElement("div",null,"Total Moves: ",e)))}},{key:"render",value:function(){return r.a.createElement(N,{ref:this.alertIntro,header:"Win",body:this.renderAlertBody(),leftButton:"Play Again"})}}]),t}(r.a.Component),I=function(e){function t(e,n,a){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_COLOR;Object(s.a)(this,t),(r=Object(l.a)(this,Object(u.a)(t).call(this))).size=void 0;var o=new p.Rectangle(0,0,n.x,n.y);r.addBackground(o.width+2*a,o.height+2*a,i),e.x=o.x+a,e.y=o.y+a,r.addChild(e);var c=Math.max(n.x,n.y);return r.size=new y(c+2*a,c+2*a),r}return Object(h.a)(t,e),Object(c.a)(t,[{key:"addBackground",value:function(e,n,a){var r=new p.Shape;return r.graphics.beginFill(a).drawRoundRect(0,0,e,n,t.RADIUS*e),this.addChildAt(r,0)}},{key:"boardSize",value:function(){return this.size}}]),t}(p.Container);function D(e){return new Promise((function(t){window.setTimeout((function(){t()}),e)}))}I.DEFAULT_COLOR="#2E5252",I.RADIUS=.05;var U=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).stage=void 0,n.board=void 0,n.score=void 0,n.onBoardCallback=function(){var e=Object(f.a)(v.a.mark((function e(t,a){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({moves:a}),!t){e.next=7;break}return e.next=4,D(2e3);case 4:return e.next=6,null===(r=n.score.current)||void 0===r?void 0:r.show(a);case 6:window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.onSizeChanged=function(e){n.newLevel(e)},n.state={level:0,moves:0},n.score=r.a.createRef(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stage=new p.Stage("game-canvas"),p.Touch.enable(this.stage),this.newLevel(4);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.moves;return r.a.createElement(b.a,{fluid:!0},r.a.createElement("div",{className:"text-center text-light mt-2 pb-3"},r.a.createElement("div",null,"Arrange Puzzle"),r.a.createElement("div",{className:"pt-2"},r.a.createElement("h4",null,"Moves: ",e))),r.a.createElement("div",null,r.a.createElement(m,{canvasId:"game-canvas",renderWidth:820,renderHeight:820,maxWidth:550})),r.a.createElement("div",{className:"text-center mt-2"},r.a.createElement(B,{onSizeChanged:this.onSizeChanged})),r.a.createElement(T,{ref:this.score}))}},{key:"newLevel",value:function(e){var t=this.stage;if(void 0!==t){t.removeAllChildren();var n=new O(new y(e,e));this.board=new g(n,this.onBoardCallback);var a=new I(this.board,new y(800,800),10);t.addChild(a),t.update()}}}]),t}(r.a.Component),Y=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(U,null)}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(43),n(44);o.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.95d81ed4.chunk.js.map